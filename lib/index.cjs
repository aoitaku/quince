Object.defineProperty(exports,Symbol.toStringTag,{value:`Module`});function e(e,t){return e===`margin`||e===`padding`}var t=class{constructor(t){this.position=`relative`,this.top=void 0,this.left=void 0,this.bottom=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.layout=`flow`,this.justifyContent=`left`,this.alignItems=`top`,this.breakAfter=!1,this.visible=!0,this.horizontalItemArrangement=`real`,this.verticalItemArrangement=`real`,this._margin=[0,0,0,0],this._padding=[0,0,0,0],t&&Object.entries(t).forEach(t=>{let[n,r]=t;e(n,r)?n===`margin`?r&&this.setMargin(r):r&&this.setPadding(r):n!==`margin`&&n!==`padding`&&Object.assign(this,{[n]:r})})}get margin(){return this._margin}get marginTop(){return this._margin[0]}get marginRight(){return this._margin[1]}get marginBottom(){return this._margin[2]}get marginLeft(){return this._margin[3]}get padding(){return this._padding}get paddingTop(){return this._padding[0]}get paddingRight(){return this._padding[1]}get paddingBottom(){return this._padding[2]}get paddingLeft(){return this._padding[3]}setMargin(e){switch(e.length){case 4:this._margin=[e[0],e[1],e[2],e[3]];break;case 3:this._margin=[e[0],e[1],e[2],e[1]];break;case 2:this._margin=[e[0],e[1],e[0],e[1]];break;case 1:this._margin=[e[0],e[0],e[0],e[0]];break}}setPadding(e){switch(e.length){case 4:this._padding=[e[0],e[1],e[2],e[3]];break;case 3:this._padding=[e[0],e[1],e[2],e[1]];break;case 2:this._padding=[e[0],e[1],e[0],e[1]];break;case 1:this._padding=[e[0],e[0],e[0],e[0]];break}}},n=class e{constructor(e,n){this.id=e,this.style=new t(n)}get x(){return this.rawX}get y(){return this.rawY}get position(){return this.style.position}get top(){return this.style.top}get left(){return this.style.left}get bottom(){return this.style.bottom}get right(){return this.style.right}get layout(){return this.style.layout}get justifyContent(){return this.style.justifyContent}get alignItems(){return this.style.alignItems}get breakAfter(){return this.style.breakAfter}get visible(){return this.style.visible}get horizontalItemArrangement(){return this.style.horizontalItemArrangement}get verticalItemArrangement(){return this.style.verticalItemArrangement}get paddingTop(){return this.style.paddingTop}get paddingRight(){return this.style.paddingRight}get paddingBottom(){return this.style.paddingBottom}get paddingLeft(){return this.style.paddingLeft}get width(){return this.rawWidth||this.contentWidth||0}get height(){return this.rawHeight||this.contentHeight||0}get layoutWidth(){return this.position===`absolute`?0:this.width+this.marginLeft+this.marginRight}get layoutHeight(){return this.position===`absolute`?0:this.height+this.marginTop+this.marginBottom}get marginTop(){return this.position===`absolute`?0:this.style.marginTop}get marginRight(){return this.position===`absolute`?0:this.style.marginRight}get marginBottom(){return this.position===`absolute`?0:this.style.marginBottom}get marginLeft(){return this.position===`absolute`?0:this.style.marginLeft}get horizontalMargin(){return this.marginLeft+this.marginRight}offsetLeft(e){return Math.max(e.paddingLeft,this.marginLeft)}offsetRight(e){return Math.max(e.paddingRight,this.marginRight)}horizontalOffset(e){return this.offsetLeft(e)+this.offsetLeft(e)}testIfComponent(t){return t instanceof e}get verticalMargin(){return this.marginTop+this.marginBottom}offsetTop(e){return Math.max(e.paddingTop,this.marginTop)}offsetBottom(e){return Math.max(e.paddingBottom,this.marginBottom)}verticalOffset(e){return this.offsetTop(e)+this.offsetBottom(e)}innerWidth(e){return this.testIfComponent(e)?e.width-this.horizontalOffset(e):e.width-this.horizontalMargin}innerHeight(e){return this.testIfComponent(e)?e.height-this.verticalOffset(e):e.height-this.verticalMargin}relayout(e=0,t=0,n){this.resize(n),this.move(e,t,n)}move(e,t,n){this.moveX(e,n),this.moveY(t,n)}resize(e){this.style.width===`full`?this.rawWidth=this.innerWidth(e):!this.testIfComponent(e)||e.verticalItemArrangement===`real`?this.rawWidth=this.style.width||0:e.verticalItemArrangement===`ratio`?this.rawWidth=(this.style.width||0)*e.width:this.rawWidth=0,this.style.height===`full`?this.rawHeight=this.innerHeight(e):!this.testIfComponent(e)||e.verticalItemArrangement===`real`?this.rawHeight=this.style.height||0:e.verticalItemArrangement===`ratio`?this.rawHeight=(this.style.height||0)*e.height:this.rawHeight=0}moveX(e,t){this.position===`absolute`?this.left&&typeof this.left==`number`?Number.isInteger(this.left)?this.rawX=e+this.left:this.rawX=e+(t.width-this.width)*this.left:this.right&&typeof this.right==`number`?Number.isInteger(this.right)?this.rawX=e+t.width-this.width-this.right:this.rawX=e+(t.width-this.width)*(1-this.right):this.rawX=e:this.left&&typeof this.left==`number`?Number.isInteger(this.left)?this.rawX=e+this.left:this.rawX=e+this.width*this.left:this.right&&typeof this.right==`number`?Number.isInteger(this.right)?this.rawX=e-this.right:this.rawX=e-this.width*this.right:this.rawX=e}moveY(e,t){this.position===`absolute`?this.top&&typeof this.top==`number`?Number.isInteger(this.top)?this.rawY=e+this.top:this.rawY=e+(t.height-this.height)*this.top:this.bottom&&typeof this.bottom==`number`?Number.isInteger(this.bottom)?this.rawY=e+t.height-this.height-this.bottom:this.rawY=e+(t.height-this.height)*(1-this.bottom):this.rawY=e:this.top&&typeof this.top==`number`?Number.isInteger(this.top)?this.rawY=e+this.top:this.rawY=e+this.height*this.top:this.bottom&&typeof this.bottom==`number`?Number.isInteger(this.bottom)?this.rawY=e-this.bottom:this.rawY=e-this.height*this.bottom:this.rawY=e}},r=(e,t)=>e.reduce((e,n)=>{let r=t(n);return e.length===0||r?e.push([n]):e[e.length-1].push(n),e},[]),i=(e,t)=>{if(e.length!==0)return e.reduce((e,n)=>t(n)>t(e)?n:e)},a=e=>e[e.length-1],o=class{resize(e,t){switch(e.layout){case`flow`:this.resizeComponentsForFlowLayout(e,t);break;case`horizontalBox`:this.resizeComponentsForHorizontalBox(e,t);break;case`verticalBox`:this.resizeComponentsForVerticalBox(e,t);break;default:break}}move(e,t=0,n=0,r){switch(e.layout){case`flow`:this.moveComponentsForFlowLayout(e,t,n,r);break;case`horizontalBox`:this.moveComponentsForHorizontalBox(e,t,n,r);break;case`verticalBox`:this.moveComponentsForVerticalBox(e,t,n,r);break;default:break}}testIfComponentsOverflow(e){let t=e.paddingLeft,n=0,r=e.contentWidth,i=!1;return a=>{if(a.position===`absolute`)return!1;let o=Math.max(t,a.marginLeft)+a.width;if(i)return i=a.breakAfter,n=o,t=e.paddingLeft,!0;i=a.breakAfter;let s=n+a.layoutWidth+e.paddingLeft+e.paddingRight;return n>0&&s>r?(n=o,t=e.paddingLeft,!0):(n+=o,t=a.marginRight,!1)}}evaluateRowWidth(e,t){let n=e.paddingLeft;return(e,r)=>{let i=Math.max(n,r.marginLeft)+e;return t&&(i=t(r,i)),r.position===`absolute`?e:(n=r.marginRight,i+r.width)}}resizeComponentsForFlowLayout(e,t){let n=e.paddingTop;e.contentWidth=e.rawWidth,e.components.forEach(t=>{t.resize(e)}),e.contentHeight=r(e.components,this.testIfComponentsOverflow(e)).filter(e=>e.length>0).reduce((e,t)=>{let r=i(t,e=>e.layoutHeight);if(r.position===`absolute`)return e;let a=Math.max(n,r.marginTop)+e;return n=r.marginBottom,a+r.height},0)+Math.max(n,e.paddingBottom)}moveComponentsForFlowLayout(e,t=0,n=0,o){let s=e.paddingTop;return r(e.components,this.testIfComponentsOverflow(e)).filter(e=>e.length>0).reduce((t,n)=>{let r=i(n,e=>e.layoutHeight),o=r.height,c=Math.max(s,r.marginTop)+t;s=r.marginBottom;let l=n.reduce(this.evaluateRowWidth(e),0)+Math.max(a(n).marginRight,e.paddingRight);return n.reduce(this.evaluateRowWidth(e,(t,r)=>{let i=e.x+r;switch(e.justifyContent){case`spaceBetween`:n.length>1&&!a(n).breakAfter&&(r+=(e.width-l)/(n.length-1));break;case`center`:i+=(e.width-l)/2;break;case`right`:i+=e.width-l;break}let s=e.y+c;switch(e.alignItems){case`center`:s+=(o-t.height)/2;break;case`bottom`:s+=o-t.height;break}return t.position===`absolute`?t.move(e.x,e.y,e):t.move(i,s,e),r}),0),c+o},0)}resizeComponentsForVerticalBox(e,t){let n=e.paddingTop;e.contentHeight=e.components.reduce((t,r)=>{let i=Math.max(n,r.marginTop)+t;return r.resize(e),r.position===`absolute`?t:(n=r.marginBottom,i+r.height)},0)+Math.max(n,e.paddingBottom);let r=i(e.components,e=>e.layoutWidth);r&&(e.contentWidth=r.width+Math.max(r.marginLeft,e.paddingLeft)+Math.max(r.marginRight,e.paddingRight))}moveComponentsForVerticalBox(e,t=0,n=0,r){let i=e.paddingTop;e.components.reduce((t,n)=>{let r=Math.max(e.paddingLeft,n.marginLeft),a=Math.max(i,n.marginTop)+t,o=e.x+r;switch(e.justifyContent){case`center`:o+=(n.innerWidth(e)-n.width)/2;break;case`right`:o+=n.innerWidth(e)-n.width;break}let s=e.y+a;switch(e.alignItems){case`spaceBetween`:e.rawHeight&&e.components.length>1&&(a+=(e.rawHeight-e.contentHeight)/(e.components.length-1));break;case`center`:s+=e.rawHeight?(e.rawHeight-e.contentHeight)/2:0;break;case`bottom`:s+=e.rawHeight?e.rawHeight-e.contentHeight:0;break}return n.position===`absolute`?n.move(e.x,e.y,e):n.move(o,s,e),n.position===`absolute`?t:(i=n.marginBottom,a+n.height)},0)}resizeComponentsForHorizontalBox(e,t){let n=e.paddingLeft;e.contentWidth=e.components.reduce((t,r)=>{if(r.resize(e),r.position===`absolute`)return t;let i=Math.max(n,r.marginLeft)+t;return n=r.marginRight,i+r.width},0)+Math.max(n,e.paddingRight);let r=i(e.components,e=>e.layoutHeight);r&&(e.contentHeight=r.height+Math.max(r.marginTop,e.paddingTop)+Math.max(r.marginBottom,e.paddingBottom))}moveComponentsForHorizontalBox(e,t=0,n=0,r){let i=e.paddingLeft;e.components.reduce((t,n)=>{let r=Math.max(i,n.marginLeft)+t,a=Math.max(e.paddingTop,e.marginTop),o=e.x+r;switch(e.justifyContent){case`spaceBetween`:e.rawWidth&&e.components.length>1&&(r+=(e.rawWidth-e.contentWidth)/(e.components.length-1));break;case`center`:o+=e.rawWidth?(e.rawWidth-e.contentWidth)/2:0;break;case`right`:o+=e.rawWidth?e.rawWidth-e.contentWidth:0;break}let s=e.y+a;switch(e.alignItems){case`center`:s+=(n.innerHeight(e)-n.height)/2;break;case`bottom`:s+=n.innerHeight(e)-n.height;break}return e.position===`absolute`?n.move(e.x,e.y,e):n.move(o,s,e),e.position===`absolute`?t:(i=n.marginRight,r+n.width)},0)}};exports.Component=n,exports.Layouter=o,exports.Style=t;